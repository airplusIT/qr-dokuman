
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Giriş Ekranı</title>
    <script>
        async function handleLogin() {
            const id = new URLSearchParams(window.location.search).get('id');
            const role = document.querySelector('input[name="role"]:checked');
            const passwordInput = document.getElementById('password');
            const password = passwordInput.value;

            if (!role) {
                alert("Lütfen bir rol seçin.");
                return;
            }

            if (role.value === "personel" && password !== "1234") {
                alert("Şifre yanlış!");
                return;
            }

            try {
                const response = await fetch("redirects.json");
                const redirects = await response.json();
                const target = redirects[id];

                if (target) {
                    window.location.href = target;
                } else {
                    alert("Belirtilen ID için dosya bulunamadı.");
                }
            } catch (error) {
                alert("redirects.json dosyası yüklenemedi.");
            }
        }

        function togglePasswordField() {
            const role = document.querySelector('input[name="role"]:checked');
            const passwordSection = document.getElementById('passwordSection');
            if (role && role.value === "personel") {
                passwordSection.style.display = "block";
            } else {
                passwordSection.style.display = "none";
            }
        }
    </script>
</head>
<body>
    <h2>Giriş Yap</h2>
    <form onsubmit="event.preventDefault(); handleLogin();">
        <label><input type="radio" name="role" value="musteri" onclick="togglePasswordField()"> Müşteri</label><br>
        <label><input type="radio" name="role" value="personel" onclick="togglePasswordField()"> Personel</label><br><br>

        <div id="passwordSection" style="display:none;">
            <label>Şifre: <input type="password" id="password"></label><br><br>
        </div>

        <button type="submit">Giriş</button>
    </form>
</body>
</html>

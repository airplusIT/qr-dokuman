<!DOCTYPE html>

<html lang="tr">
<head>
<meta charset="utf-8"/>
<title>Yönlendirme Sayfası</title>
<style>
body {
    margin: 0;
    padding: 0;
    background-image: url('docs/UploadedImage1.jpg');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    font-family: Arial, sans-serif;
    color: white;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
}
.container {
    background-color: rgba(0, 0, 0, 0.6);
    padding: 40px;
    border-radius: 15px;
    text-align: center;
    max-width: 90%;
    width: 400px;
}
.container img {
    max-width: 150px;
    height: auto;
    margin-bottom: 20px;
}
.container h1 {
    font-size: 2em;
    margin-bottom: 20px;
}
.container button {
    display: block;
    width: 100%;
    padding: 15px;
    margin: 10px 0;
    font-size: 1.2em;
    border: none;
    border-radius: 8px;
    background-color: #007BFF;
    color: white;
    cursor: pointer;
}
.container button:hover {
    background-color: #0056b3;
}
@media (max-width: 600px) {
    .container {
        width: 90%;
        padding: 30px;
    }
    .container h1 {
        font-size: 1.5em;
    }
    .container button {
        font-size: 1em;
        padding: 12px;
    }
}
</style>
</head>
<body>
<h1>Hoş Geldiniz</h1>
<p>Lütfen giriş türünüzü seçin:</p>
<button onclick="girisSec('musteri')">Müşteri Girişi</button>
<button onclick="girisSec('personel')">Personel Girişi</button>
<div id="sifreAlani">
<p>Personel şifrenizi girin:</p>
<input id="sifre" type="password"/>
<button onclick="girisYap()">Giriş Yap</button>
</div>
<script>
    let secim = '';
    const urlParams = new URLSearchParams(window.location.search);
    const id = urlParams.get('id');

    const uzantilar = ['pdf', 'jpg', 'txt', 'docx', 'xlsx', 'xls'];

    function girisSec(tip) {
      secim = tip;
      if (tip === 'personel') {
        document.getElementById('sifreAlani').style.display = 'block';
      } else {
        dosyaYukle(tip);
      }
    }

    function girisYap() {
      const sifre = document.getElementById('sifre').value;
      if (sifre === '1234') {
        dosyaYukle('personel');
      } else {
        alert('Şifre yanlış!');
      }
    }

    function dosyaYukle(tip) {
      const baseUrl = 'https://airplusqr.netlify.app/docs/' + tip + '/';
      let bulundu = false;

      (function kontrol(index) {
        if (index >= uzantilar.length) {
          alert('Dosya bulunamadı!');
          return;
        }

        const dosyaAdi = id + '.' + uzantilar[index];
        const tamUrl = baseUrl + dosyaAdi;

        fetch(tamUrl, { method: 'HEAD' })
          .then(response => {
            if (response.ok) {
              bulundu = true;
              if (['docx', 'xlsx', 'xls'].includes(uzantilar[index])) {
                const viewerUrl = 'https://docs.google.com/gview?url=' + tamUrl + '&embedded=true';
                window.location.href = viewerUrl;
              } else {
                window.location.href = tamUrl;
              }
            } else {
              kontrol(index + 1);
            }
          })
          .catch(() => kontrol(index + 1));
      })(0);
    }
  </script>
</body>
</html>
